<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRIP STORE - 관리자 페이지</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body {
            min-height: 100vh;
            margin: 0;
        }
        .layout-container {
            display: flex;
            min-height: 100vh;
        }
        .sidebar {
            width: 250px;
            background-color: #1f2937;
            color: white;
            display: flex;
            flex-direction: column;
        }
        .main-content {
            flex: 1;
            overflow-y: auto;
            background-color: #f3f4f6;
        }
        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: #d1d5db;
            transition: all 0.3s;
            border-left: 3px solid transparent;
        }
        .nav-link:hover {
            background-color: #374151;
            color: white;
        }
        .nav-link.active {
            background-color: #3b82f6;
            color: white;
            border-left-color: #93c5fd;
        }
        .admin-section {
            display: none;
            padding: 20px;
        }
        .admin-section.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="layout-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="p-5">
                <h1 class="text-xl font-bold">Admin Panel</h1>
            </div>
            <nav class="flex-grow">
                <a href="#dashboard" class="nav-link active" data-section="dashboard-section">
                    <i class="fas fa-tachometer-alt w-6"></i>
                    <span class="ml-3">대시보드</span>
                </a>
                <a href="#members" class="nav-link" data-section="members-section">
                    <i class="fas fa-users w-6"></i>
                    <span class="ml-3">회원 관리</span>
                </a>
                <a href="#categories" class="nav-link" data-section="categories-section">
                    <i class="fas fa-tags w-6"></i>
                    <span class="ml-3">카테고리 관리</span>
                </a>
                <a href="#accounts" class="nav-link" data-section="accounts-section">
                    <i class="fas fa-university w-6"></i>
                    <span class="ml-3">계좌 관리</span>
                </a>
                <a href="#footer" class="nav-link" data-section="footer-section">
                    <i class="fas fa-info-circle w-6"></i>
                    <span class="ml-3">푸터 정보 수정</span>
                </a>
            </nav>
            <div class="mt-auto p-4 border-t border-gray-700">
                <a href="index.html" class="nav-link">
                    <i class="fas fa-home w-6"></i>
                    <span class="ml-3">사이트로 돌아가기</span>
                </a>
                <button id="logout-btn" class="nav-link w-full text-left">
                    <i class="fas fa-sign-out-alt w-6"></i>
                    <span class="ml-3">로그아웃</span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header class="bg-white shadow-sm p-4 flex justify-between items-center">
                <h2 id="page-title" class="text-xl font-semibold">대시보드</h2>
                <div>
                    <span class="text-gray-600">관리자님, 환영합니다.</span>
                </div>
            </header>

            <!-- Dashboard Section -->
            <section id="dashboard-section" class="admin-section active p-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-semibold mb-4">관리자 대시보드</h3>
                    <p class="text-gray-600">좌측 메뉴를 통해 카테고리 또는 푸터 정보를 관리할 수 있습니다.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                        <div class="bg-blue-100 p-6 rounded-lg flex items-center">
                            <div class="rounded-full bg-blue-200 p-3 mr-4">
                                <i class="fas fa-users text-blue-600"></i>
                            </div>
                            <div>
                                <p class="text-sm text-blue-600">총 사용자</p>
                                <p class="text-2xl font-bold">2,345</p>
                            </div>
                        </div>
                        
                        <div class="bg-green-100 p-6 rounded-lg flex items-center">
                            <div class="rounded-full bg-green-200 p-3 mr-4">
                                <i class="fas fa-box text-green-600"></i>
                            </div>
                            <div>
                                <p class="text-sm text-green-600">여행 패키지</p>
                                <p class="text-2xl font-bold">48</p>
                            </div>
                        </div>
                        
                        <div class="bg-purple-100 p-6 rounded-lg flex items-center">
                            <div class="rounded-full bg-purple-200 p-3 mr-4">
                                <i class="fas fa-credit-card text-purple-600"></i>
                            </div>
                            <div>
                                <p class="text-sm text-purple-600">총 예약</p>
                                <p class="text-2xl font-bold">156</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Categories Section -->
            <section id="categories-section" class="admin-section p-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-semibold mb-4">카테고리 관리</h3>

                    <!-- 카테고리 타입 전환 탭 -->
                    <div class="border-b border-gray-200">
                        <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                            <button id="menu-cat-btn" class="border-primary text-primary-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                메뉴 카테고리
                            </button>
                            <button id="country-cat-btn" class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                국가/지역 관리
                            </button>
                        </nav>
                    </div>

                    <!-- 메뉴 카테고리 관리 섹션 -->
                    <div id="menu-category-section" class="mt-6">
                        <!-- 메뉴 관리 전환 탭 -->
                        <div class="border-b border-gray-200 mb-6">
                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                <button id="main-menu-btn" class="border-primary text-primary-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                    메인 메뉴
                                </button>
                                <button id="sub-menu-btn" class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                    서브 메뉴
                                </button>
                            </nav>
                        </div>

                        <!-- 메인 메뉴 관리 -->
                        <div id="main-menu-section">
                            <div class="mb-6">
                                <!-- 메뉴 카테고리 폼 -->
                                <form id="menu-category-form" class="flex gap-4 items-end mb-4">
                                    <div class="flex-grow">
                                        <label for="menu-category-name" class="block text-sm font-medium text-gray-700">메뉴 이름</label>
                                        <input type="text" id="menu-category-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required>
                                    </div>
                                    <div>
                                        <label for="menu-category-url" class="block text-sm font-medium text-gray-700">URL 경로</label>
                                        <input type="text" id="menu-category-url" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required placeholder="예: best.html">
                                    </div>
                                    <div class="flex-none">
                                        <label for="menu-category-order" class="block text-sm font-medium text-gray-700">순서</label>
                                        <input type="number" id="menu-category-order" min="1" class="mt-1 block w-24 rounded-md border-gray-300 shadow-sm p-2 border" required>
                                    </div>
                                    <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">저장</button>
                                </form>
                            </div>

                            <!-- 메뉴 카테고리 테이블 -->
                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg mb-8">
                                <table class="min-w-full divide-y divide-gray-300">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900">순서</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">메뉴 이름</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">URL 경로</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">서브메뉴 수</th>
                                            <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                                <span class="sr-only">Actions</span>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200 bg-white" id="menu-category-list">
                                        <!-- 메뉴 카테고리 목록이 동적으로 렌더링됩니다 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- 서브 메뉴 관리 -->
                        <div id="sub-menu-section" class="hidden">
                            <!-- 서브 메뉴 폼 -->
                            <form id="sub-menu-form" class="flex gap-4 items-end mb-4">
                                <div>
                                    <label for="parent-menu" class="block text-sm font-medium text-gray-700">상위 메뉴</label>
                                    <select id="parent-menu" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required>
                                        <option value="">상위 메뉴 선택</option>
                                    </select>
                                </div>
                                <div class="flex-grow">
                                    <label for="sub-menu-name" class="block text-sm font-medium text-gray-700">서브메뉴 이름</label>
                                    <input type="text" id="sub-menu-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required>
                                </div>
                                <div>
                                    <label for="sub-menu-url" class="block text-sm font-medium text-gray-700">URL 경로</label>
                                    <input type="text" id="sub-menu-url" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required placeholder="예: packages.html?region=europe">
                                </div>
                                <div class="flex-none">
                                    <label for="sub-menu-order" class="block text-sm font-medium text-gray-700">순서</label>
                                    <input type="number" id="sub-menu-order" min="1" class="mt-1 block w-24 rounded-md border-gray-300 shadow-sm p-2 border" required>
                                </div>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">추가</button>
                            </form>
                            
                            <!-- 서브 메뉴 테이블 -->
                            <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg mb-8">
                                <table class="min-w-full divide-y divide-gray-300">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900">순서</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">상위 메뉴</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">서브메뉴 이름</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">URL 경로</th>
                                            <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                                <span class="sr-only">Actions</span>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200 bg-white" id="sub-menu-list">
                                        <!-- 서브 메뉴 목록이 동적으로 렌더링됩니다 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- 국가/지역 관리 섹션 -->
                    <div id="country-category-section" class="mt-6 hidden">
                        <!-- 국가/지역 전환 탭 -->
                        <div class="border-b border-gray-200 mb-6">
                            <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                                <button id="country-tab-btn" class="border-primary text-primary-600 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                    국가 관리
                                </button>
                                <button id="city-tab-btn" class="border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                                    지역/도시 관리
                                </button>
                            </nav>
                        </div>

                        <!-- 국가 관리 섹션 -->
                        <div id="country-management" class="mb-6">
                            <!-- 국가 카테고리 폼 -->
                            <form id="category-form" class="flex gap-4 items-end mb-4">
                                <div class="flex-grow">
                                    <label for="category-name" class="block text-sm font-medium text-gray-700">국가 이름</label>
                                    <input type="text" id="category-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required>
                                </div>
                                <div class="flex-none">
                                    <label for="category-order" class="block text-sm font-medium text-gray-700">순서</label>
                                    <input type="number" id="category-order" min="1" class="mt-1 block w-24 rounded-md border-gray-300 shadow-sm p-2 border" required>
                                </div>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">저장</button>
                            </form>
                            
                            <!-- 국가 카테고리 테이블 -->
                            <div id="main-category-table" class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg mb-8">
                                <table class="min-w-full divide-y divide-gray-300">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900">순서</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">국가 이름</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">지역/도시 수</th>
                                            <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                                <span class="sr-only">Actions</span>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-200 bg-white" id="category-list">
                                        <!-- 여기에 카테고리 목록이 동적으로 렌더링됩니다 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- 지역/도시 관리 섹션 -->
                        <div id="city-management" class="mb-6 hidden">
                            <!-- 서브 카테고리 폼 -->
                            <form id="sub-category-form" class="flex gap-4 items-end mb-4">
                                <div>
                                    <label for="parent-category" class="block text-sm font-medium text-gray-700">국가</label>
                                    <select id="parent-category" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required>
                                        <option value="">국가 선택</option>
                                    </select>
                                </div>
                                <div class="flex-grow">
                                    <label for="sub-category-name" class="block text-sm font-medium text-gray-700">지역/도시 이름</label>
                                    <input type="text" id="sub-category-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required>
                                </div>
                                <div class="flex-none">
                                    <label for="sub-category-order" class="block text-sm font-medium text-gray-700">순서</label>
                                    <input type="number" id="sub-category-order" min="1" class="mt-1 block w-24 rounded-md border-gray-300 shadow-sm p-2 border" required>
                                </div>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">추가</button>
                            </form>
                            
                            <!-- 서브 카테고리 테이블 -->
                            <div id="sub-category-table" class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                                <table class="min-w-full divide-y divide-gray-300">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900">순서</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">국가</th>
                                            <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">지역/도시 이름</th>
                                            <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                                <span class="sr-only">Actions</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 bg-white" id="sub-category-list">
                                <!-- 여기에 서브카테고리 목록이 동적으로 렌더링됩니다 -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- 계좌 관리 섹션 -->
            <section id="accounts-section" class="admin-section p-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-semibold mb-4">무통장 입금 계좌 관리</h3>
                    
                    <div class="mb-6">
                        <form id="account-form" class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label for="bank-name" class="block text-sm font-medium text-gray-700">은행명</label>
                                    <input type="text" id="bank-name" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required>
                                </div>
                                <div>
                                    <label for="account-number" class="block text-sm font-medium text-gray-700">계좌번호</label>
                                    <input type="text" id="account-number" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required>
                                </div>
                                <div>
                                    <label for="account-holder" class="block text-sm font-medium text-gray-700">예금주</label>
                                    <input type="text" id="account-holder" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border" required>
                                </div>
                            </div>
                            <div class="flex justify-end">
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700">계좌 추가</button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                        <table class="min-w-full divide-y divide-gray-300">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900">은행명</th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">계좌번호</th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">예금주</th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">사용여부</th>
                                    <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                        <span class="sr-only">Actions</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 bg-white" id="account-list">
                                <!-- 계좌 목록이 동적으로 렌더링됩니다 -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="mt-6 p-4 bg-blue-50 rounded-md">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <i class="fas fa-info-circle text-blue-600"></i>
                            </div>
                            <div class="ml-3">
                                <h3 class="text-sm font-medium text-blue-800">안내사항</h3>
                                <div class="mt-2 text-sm text-blue-700">
                                    <ul class="list-disc pl-5 space-y-1">
                                        <li>무통장 입금만 가능하도록 설정되어 있습니다.</li>
                                        <li>사용 중인 계좌만 결제 페이지에 표시됩니다.</li>
                                        <li>계좌 여러 개를 등록하여 관리할 수 있습니다.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- 회원 관리 섹션 -->
            <section id="members-section" class="admin-section p-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-semibold mb-4">회원 관리</h3>
                    <p class="text-gray-600 mb-6">고객 계정을 관리하고 회원 상태를 조회할 수 있습니다.</p>
                    
                    <div class="mb-8 flex flex-wrap items-center justify-between">
                        <div class="mb-4 md:mb-0">
                            <div class="flex space-x-2">
                                <div class="relative">
                                    <select id="member-status-filter" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md">
                                        <option value="all">전체 회원</option>
                                        <option value="active">활성 회원</option>
                                        <option value="inactive">비활성 회원</option>
                                    </select>
                                </div>
                                <div class="relative rounded-md shadow-sm">
                                    <input type="text" id="member-search" class="focus:ring-blue-500 focus:border-blue-500 block w-full pr-10 sm:text-sm border-gray-300 rounded-md p-2" placeholder="이름 또는 이메일로 검색">
                                    <div class="absolute inset-y-0 right-0 flex items-center px-3">
                                        <i class="fas fa-search text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <button id="add-member-btn" class="inline-flex items-center justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                <i class="fas fa-plus mr-2"></i> 회원 추가
                            </button>
                        </div>
                    </div>
                    
                    <div class="overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg">
                        <table class="min-w-full divide-y divide-gray-300">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900">회원 ID</th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">이름</th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">이메일</th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">가입일</th>
                                    <th scope="col" class="px-3 py-3.5 text-left text-sm font-semibold text-gray-900">상태</th>
                                    <th scope="col" class="relative py-3.5 pl-3 pr-4 sm:pr-6">
                                        <span class="sr-only">작업</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 bg-white" id="member-list">
                                <!-- 회원 목록이 동적으로 렌더링됩니다 -->
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- 페이지네이션 -->
                    <div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-4">
                        <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                            <div>
                                <p class="text-sm text-gray-700" id="member-count">
                                    총 <span class="font-medium">0</span>명의 회원이 있습니다.
                                </p>
                            </div>
                            <div>
                                <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination" id="member-pagination">
                                    <!-- 페이지네이션 버튼들이 여기에 동적으로 추가됩니다 -->
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 회원 상세 정보 모달 -->
                <div id="member-detail-modal" class="fixed z-10 inset-0 overflow-y-auto hidden">
                    <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center">
                        <!-- 배경 오버레이 -->
                        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" id="member-modal-backdrop"></div>
                        
                        <!-- 모달 내용 -->
                        <div class="relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                            <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                                <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4" id="member-modal-title">회원 상세 정보</h3>
                                
                                <div id="member-form" class="grid grid-cols-1 gap-4">
                                    <div>
                                        <label for="member-name" class="block text-sm font-medium text-gray-700">이름</label>
                                        <input type="text" id="member-name" name="member-name" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 border">
                                    </div>
                                    <div>
                                        <label for="member-email" class="block text-sm font-medium text-gray-700">이메일</label>
                                        <input type="email" id="member-email" name="member-email" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 border">
                                    </div>
                                    <div>
                                        <label for="member-phone" class="block text-sm font-medium text-gray-700">전화번호</label>
                                        <input type="tel" id="member-phone" name="member-phone" class="mt-1 focus:ring-blue-500 focus:border-blue-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md p-2 border">
                                    </div>
                                    <div>
                                        <label for="member-status" class="block text-sm font-medium text-gray-700">계정 상태</label>
                                        <select id="member-status" name="member-status" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                                            <option value="active">활성</option>
                                            <option value="inactive">비활성</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                                <button type="button" id="save-member-btn" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm">
                                    저장
                                </button>
                                <button type="button" id="close-member-modal-btn" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                                    닫기
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Footer Section -->
            <section id="footer-section" class="admin-section p-6">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-semibold mb-4">푸터 정보 수정</h3>
                    
                    <form id="footer-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label for="footer-ceo" class="block text-sm font-medium text-gray-700">대표</label>
                                <input type="text" id="footer-ceo" value="홍길동" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border">
                            </div>
                            <div>
                                <label for="footer-business-number" class="block text-sm font-medium text-gray-700">사업자등록번호</label>
                                <input type="text" id="footer-business-number" value="123-45-67890" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border">
                            </div>
                            <div>
                                <label for="footer-report-number" class="block text-sm font-medium text-gray-700">통신판매업신고번호</label>
                                <input type="text" id="footer-report-number" value="제2025-서울강남-1234호" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border">
                            </div>
                            <div>
                                <label for="footer-tourism-number" class="block text-sm font-medium text-gray-700">관광사업자등록번호</label>
                                <input type="text" id="footer-tourism-number" value="제2025-01호" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border">
                            </div>
                            <div class="md:col-span-2">
                                <label for="footer-address" class="block text-sm font-medium text-gray-700">주소</label>
                                <input type="text" id="footer-address" value="서울특별시 강남구 테헤란로 123, 7층" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border">
                            </div>
                            <div>
                                <label for="footer-contact" class="block text-sm font-medium text-gray-700">고객센터</label>
                                <input type="text" id="footer-contact" value="1588-1234" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border">
                            </div>
                            <div>
                                <label for="footer-contact-hours" class="block text-sm font-medium text-gray-700">고객센터 운영시간</label>
                                <input type="text" id="footer-contact-hours" value="평일 09:00-18:00 (주말/공휴일 휴무)" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-2 border">
                            </div>
                        </div>
                        <div class="flex justify-end pt-5">
                            <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                저장하기
                            </button>
                        </div>
                    </form>
                </div>
            </section>
        </div>
    </div>

    <script>
        // 카테고리 데이터 관리
        let categories = [
            { id: 1, name: '유럽', order: 1, subCategories: [
                { id: 101, name: '프랑스', order: 1, parentId: 1 },
                { id: 102, name: '이탈리아', order: 2, parentId: 1 }
            ]},
            { id: 2, name: '동남아시아', order: 2, subCategories: [
                { id: 201, name: '태국', order: 1, parentId: 2 },
                { id: 202, name: '베트남', order: 2, parentId: 2 }
            ]},
            { id: 3, name: '일본', order: 3, subCategories: [
                { id: 301, name: '도쿄', order: 1, parentId: 3 },
                { id: 302, name: '오사카', order: 2, parentId: 3 }
            ]}
        ];
        
        // 계좌 데이터 관리
        let bankAccounts = [
            { id: 1, bankName: '국민은행', accountNumber: '123-45-67890', accountHolder: '케이트래블', active: true },
            { id: 2, bankName: '신한은행', accountNumber: '987-65-43210', accountHolder: '케이트래블', active: false }
        ];
        
        let editingCategoryId = null;
        let editingSubCategoryId = null;
        let currentCategoryId = null;
        const categoryForm = document.getElementById('category-form');
        const categoryNameInput = document.getElementById('category-name');
        const categoryOrderInput = document.getElementById('category-order');
        const categoryList = document.querySelector('#category-list');

        // 메인 카테고리 목록 렌더링
        function renderCategories() {
            categoryList.innerHTML = '';
            
            if (categories.length === 0) {
                categoryList.innerHTML = '<tr><td colspan="4" class="text-center py-4 text-gray-500">등록된 카테고리가 없습니다.</td></tr>';
                return;
            }
            
            // 순서에 따라 정렬
            const sortedCategories = [...categories].sort((a, b) => a.order - b.order);
            
            sortedCategories.forEach(category => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900">${category.order}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${category.name}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${category.subCategories ? category.subCategories.length : 0}개</td>
                    <td class="whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium">
                        <button data-id="${category.id}" class="edit-category-btn text-blue-600 hover:text-blue-900 mr-2">수정</button>
                        <button data-id="${category.id}" class="move-up-category-btn text-gray-600 hover:text-gray-900 mr-1" ${category.order === 1 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <button data-id="${category.id}" class="move-down-category-btn text-gray-600 hover:text-gray-900 mr-2" ${category.order === categories.length ? 'disabled' : ''}>
                            <i class="fas fa-arrow-down"></i>
                        </button>
                        <button data-id="${category.id}" class="view-subcategories-btn text-green-600 hover:text-green-900 mr-2">지역보기</button>
                        <button data-id="${category.id}" class="delete-category-btn text-red-600 hover:text-red-900">삭제</button>
                    </td>
                `;
                categoryList.appendChild(row);
            });
            
            // 수정 버튼에 이벤트 연결
            document.querySelectorAll('.edit-category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const category = categories.find(cat => cat.id === id);
                    
                    if (category) {
                        editingCategoryId = id;
                        categoryNameInput.value = category.name;
                        categoryOrderInput.value = category.order;
                        document.querySelector('#category-form button[type="submit"]').textContent = '수정';
                        
                        // 취소 버튼 추가 (있다면)
                        const cancelBtn = document.createElement('button');
                        cancelBtn.type = 'button';
                        cancelBtn.id = 'cancel-edit';
                        cancelBtn.className = 'px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 ml-2';
                        cancelBtn.textContent = '취소';
                        cancelBtn.onclick = cancelEdit;
                        
                        // 이미 취소 버튼이 있는지 확인
                        const existingCancelBtn = document.getElementById('cancel-edit');
                        if (!existingCancelBtn) {
                            document.querySelector('#category-form button[type="submit"]').insertAdjacentElement('afterend', cancelBtn);
                        }
                    }
                });
            });
            
            // 지역 보기 버튼에 이벤트 연결
            document.querySelectorAll('.view-subcategories-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    switchToSubCategoryView(id);
                });
            });
            
            // 순서 위로 버튼에 이벤트 연결
            document.querySelectorAll('.move-up-category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const category = categories.find(cat => cat.id === id);
                    
                    if (category && category.order > 1) {
                        const prevCategory = categories.find(cat => cat.order === category.order - 1);
                        if (prevCategory) {
                            prevCategory.order++;
                            category.order--;
                            renderCategories();
                        }
                    }
                });
            });
            
            // 순서 아래로 버튼에 이벤트 연결
            document.querySelectorAll('.move-down-category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const category = categories.find(cat => cat.id === id);
                    
                    if (category && category.order < categories.length) {
                        const nextCategory = categories.find(cat => cat.order === category.order + 1);
                        if (nextCategory) {
                            nextCategory.order--;
                            category.order++;
                            renderCategories();
                        }
                    }
                });
            });
            
            // 삭제 버튼에 이벤트 연결
            document.querySelectorAll('.delete-category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const category = categories.find(cat => cat.id === id);
                    
                    if (category && category.subCategories && category.subCategories.length > 0) {
                        alert('이 국가에 연결된 지역/도시가 있습니다. 먼저 지역/도시를 삭제해주세요.');
                        return;
                    }
                    
                    if (confirm('이 카테고리를 삭제하시겠습니까?')) {
                        categories = categories.filter(cat => cat.id !== id);
                        
                        // 삭제 후 순서 재조정
                        categories = categories.map((cat, index) => ({
                            ...cat,
                            order: index + 1
                        }));
                        
                        renderCategories();
                        updateParentCategoryDropdown();
                        alert('카테고리가 삭제되었습니다.');
                    }
                });
            });
            
            // 부모 카테고리 드롭다운 업데이트
            updateParentCategoryDropdown();
        }
        
        // 서브 카테고리 목록 렌더링
        function renderSubCategories(parentId = null) {
            const subCategoryList = document.getElementById('sub-category-list');
            subCategoryList.innerHTML = '';
            
            let allSubCategories = [];
            
            // 특정 부모 카테고리가 선택된 경우
            if (parentId) {
                const parentCategory = categories.find(cat => cat.id === parentId);
                if (parentCategory && parentCategory.subCategories) {
                    allSubCategories = parentCategory.subCategories.map(sub => ({
                        ...sub,
                        parentName: parentCategory.name,
                        parentId: parentCategory.id
                    }));
                }
            } 
            // 모든 서브 카테고리 표시
            else {
                categories.forEach(category => {
                    if (category.subCategories && category.subCategories.length > 0) {
                        const subs = category.subCategories.map(sub => ({
                            ...sub,
                            parentName: category.name,
                            parentId: category.id
                        }));
                        allSubCategories = [...allSubCategories, ...subs];
                    }
                });
            }
            
            if (allSubCategories.length === 0) {
                subCategoryList.innerHTML = '<tr><td colspan="4" class="text-center py-4 text-gray-500">등록된 지역/도시가 없습니다.</td></tr>';
                return;
            }
            
            // 순서대로 정렬
            const sortedSubCategories = [...allSubCategories].sort((a, b) => a.order - b.order);
            
            sortedSubCategories.forEach(subCategory => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900">${subCategory.order}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${subCategory.parentName}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${subCategory.name}</td>
                    <td class="whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium">
                        <button data-id="${subCategory.id}" data-parent-id="${subCategory.parentId}" class="edit-subcategory-btn text-blue-600 hover:text-blue-900 mr-2">수정</button>
                        <button data-id="${subCategory.id}" data-parent-id="${subCategory.parentId}" class="move-up-sub-btn text-gray-600 hover:text-gray-900 mr-1"
                            ${subCategory.order === 1 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <button data-id="${subCategory.id}" data-parent-id="${subCategory.parentId}" class="move-down-sub-btn text-gray-600 hover:text-gray-900 mr-2"
                            ${parentId && subCategory.order === (categories.find(c => c.id === parentId)?.subCategories?.length || 0) ? 'disabled' : ''}>
                            <i class="fas fa-arrow-down"></i>
                        </button>
                        <button data-id="${subCategory.id}" data-parent-id="${subCategory.parentId}" class="delete-subcategory-btn text-red-600 hover:text-red-900">삭제</button>
                    </td>
                `;
                subCategoryList.appendChild(row);
            });
            
            // 서브 카테고리 수정 버튼에 이벤트 연결
            document.querySelectorAll('.edit-subcategory-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const parentId = parseInt(this.getAttribute('data-parent-id'));
                    const parentCategory = categories.find(cat => cat.id === parentId);
                    
                    if (parentCategory) {
                        const subCategory = parentCategory.subCategories.find(sub => sub.id === id);
                        if (subCategory) {
                            editingSubCategoryId = id;
                            currentCategoryId = parentId;
                            document.getElementById('parent-category').value = parentId;
                            document.getElementById('sub-category-name').value = subCategory.name;
                            document.getElementById('sub-category-order').value = subCategory.order;
                            document.querySelector('#sub-category-form button[type="submit"]').textContent = '수정';
                            
                            switchToSubCategoryMode();
                            
                            // 취소 버튼 추가
                            const cancelBtn = document.createElement('button');
                            cancelBtn.type = 'button';
                            cancelBtn.id = 'cancel-sub-edit';
                            cancelBtn.className = 'px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 ml-2';
                            cancelBtn.textContent = '취소';
                            cancelBtn.onclick = cancelSubEdit;
                            
                            // 이미 취소 버튼이 있는지 확인
                            const existingCancelBtn = document.getElementById('cancel-sub-edit');
                            if (!existingCancelBtn) {
                                document.querySelector('#sub-category-form button[type="submit"]').insertAdjacentElement('afterend', cancelBtn);
                            }
                        }
                    }
                });
            });
            
            // 서브 카테고리 삭제 버튼에 이벤트 연결
            document.querySelectorAll('.delete-subcategory-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const parentId = parseInt(this.getAttribute('data-parent-id'));
                    
                    if (confirm('이 지역/도시를 삭제하시겠습니까?')) {
                        const parentIndex = categories.findIndex(cat => cat.id === parentId);
                        if (parentIndex !== -1) {
                            categories[parentIndex].subCategories = categories[parentIndex].subCategories.filter(sub => sub.id !== id);
                            
                            // 삭제 후 순서 재조정
                            categories[parentIndex].subCategories = categories[parentIndex].subCategories.map((sub, index) => ({
                                ...sub,
                                order: index + 1
                            }));
                            
                            renderSubCategories(currentCategoryId);
                            alert('지역/도시가 삭제되었습니다.');
                        }
                    }
                });
            });
            
            // 서브 카테고리 순서 위로 버튼에 이벤트 연결
            document.querySelectorAll('.move-up-sub-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const parentId = parseInt(this.getAttribute('data-parent-id'));
                    const parentCategory = categories.find(cat => cat.id === parentId);
                    
                    if (parentCategory) {
                        const subCategory = parentCategory.subCategories.find(sub => sub.id === id);
                        if (subCategory && subCategory.order > 1) {
                            const prevSubCategory = parentCategory.subCategories.find(sub => sub.order === subCategory.order - 1);
                            if (prevSubCategory) {
                                prevSubCategory.order++;
                                subCategory.order--;
                                renderSubCategories(parentId);
                            }
                        }
                    }
                });
            });
            
            // 서브 카테고리 순서 아래로 버튼에 이벤트 연결
            document.querySelectorAll('.move-down-sub-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const parentId = parseInt(this.getAttribute('data-parent-id'));
                    const parentCategory = categories.find(cat => cat.id === parentId);
                    
                    if (parentCategory) {
                        const subCategory = parentCategory.subCategories.find(sub => sub.id === id);
                        if (subCategory && subCategory.order < parentCategory.subCategories.length) {
                            const nextSubCategory = parentCategory.subCategories.find(sub => sub.order === subCategory.order + 1);
                            if (nextSubCategory) {
                                nextSubCategory.order--;
                                subCategory.order++;
                                renderSubCategories(parentId);
                            }
                        }
                    }
                });
            });
        }
        
        // 부모 카테고리 드롭다운 업데이트
        function updateParentCategoryDropdown() {
            const parentCategorySelect = document.getElementById('parent-category');
            if (!parentCategorySelect) return;
            
            // 기존 옵션 제거 (첫번째 기본 옵션 제외)
            while (parentCategorySelect.options.length > 1) {
                parentCategorySelect.remove(1);
            }
            
            // 옵션 추가
            categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = category.name;
                parentCategorySelect.appendChild(option);
            });
            
            // 이전에 선택된 값이 있다면 복원
            if (currentCategoryId) {
                parentCategorySelect.value = currentCategoryId;
            }
        }
        
        // 국가 관리 모드 전환
        function switchToMainCategoryMode() {
            // UI 전환
            document.getElementById('country-tab-btn').classList.add('border-primary', 'text-primary-600');
            document.getElementById('country-tab-btn').classList.remove('border-transparent', 'text-gray-500');
            document.getElementById('city-tab-btn').classList.add('border-transparent', 'text-gray-500');
            document.getElementById('city-tab-btn').classList.remove('border-primary', 'text-primary-600');
            
            // 폼 전환
            document.getElementById('category-form').style.display = 'flex';
            document.getElementById('sub-category-form').style.display = 'none';
            
            // 테이블 전환
            document.getElementById('country-management').classList.remove('hidden');
            document.getElementById('city-management').classList.add('hidden');
            
            // 편집 상태 초기화
            cancelSubEdit();
            currentCategoryId = null;
        }
        
        // 지역/도시 관리 모드 전환
        function switchToSubCategoryMode() {
            // UI 전환
            document.getElementById('city-tab-btn').classList.add('border-primary', 'text-primary-600');
            document.getElementById('city-tab-btn').classList.remove('border-transparent', 'text-gray-500');
            document.getElementById('country-tab-btn').classList.add('border-transparent', 'text-gray-500');
            document.getElementById('country-tab-btn').classList.remove('border-primary', 'text-primary-600');
            
            // 폼 전환
            document.getElementById('category-form').style.display = 'none';
            document.getElementById('sub-category-form').style.display = 'block';
            
            // 테이블 전환
            document.getElementById('country-management').classList.add('hidden');
            document.getElementById('city-management').classList.remove('hidden');
            
            // 편집 상태 초기화
            cancelEdit();
            
            // 서브카테고리 렌더링
            renderSubCategories(currentCategoryId);
        }
        
        // 특정 카테고리의 서브카테고리 보기로 전환
        function switchToSubCategoryView(categoryId) {
            currentCategoryId = categoryId;
            switchToSubCategoryMode();
            document.getElementById('parent-category').value = categoryId;
        }
        
        // 메인 카테고리 폼 제출 이벤트
        categoryForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const categoryName = categoryNameInput.value.trim();
            let categoryOrder = parseInt(categoryOrderInput.value);
            
            if (!categoryName) {
                alert('카테고리 이름을 입력해주세요.');
                return;
            }
            
            if (isNaN(categoryOrder) || categoryOrder < 1) {
                categoryOrder = categories.length + 1;
            }
            
            if (editingCategoryId) {
                // 카테고리 수정
                const index = categories.findIndex(cat => cat.id === editingCategoryId);
                if (index !== -1) {
                    const oldOrder = categories[index].order;
                    
                    // 순서가 변경된 경우, 다른 카테고리의 순서도 조정
                    if (oldOrder !== categoryOrder) {
                        if (categoryOrder > oldOrder) {
                            // 내려갈 때: 사이에 있는 요소들은 위로 한 칸씩
                            categories.forEach(cat => {
                                if (cat.id !== editingCategoryId && cat.order > oldOrder && cat.order <= categoryOrder) {
                                    cat.order--;
                                }
                            });
                        } else {
                            // 올라갈 때: 사이에 있는 요소들은 아래로 한 칸씩
                            categories.forEach(cat => {
                                if (cat.id !== editingCategoryId && cat.order >= categoryOrder && cat.order < oldOrder) {
                                    cat.order++;
                                }
                            });
                        }
                    }
                    
                    categories[index].name = categoryName;
                    categories[index].order = categoryOrder;
                    alert('카테고리가 수정되었습니다.');
                }
                editingCategoryId = null;
                
                // 취소 버튼 제거
                const cancelBtn = document.getElementById('cancel-edit');
                if (cancelBtn) cancelBtn.remove();
                
                // 저장 버튼 텍스트 원래대로
                document.querySelector('#category-form button[type="submit"]').textContent = '저장';
            } else {
                // 현재 order 이상의 카테고리들 한 칸씩 아래로
                categories.forEach(cat => {
                    if (cat.order >= categoryOrder) {
                        cat.order++;
                    }
                });
                
                // 카테고리 추가
                const newId = categories.length > 0 ? Math.max(...categories.map(cat => cat.id)) + 1 : 1;
                categories.push({ id: newId, name: categoryName, order: categoryOrder, subCategories: [] });
                alert('카테고리가 추가되었습니다.');
            }
            
            categoryNameInput.value = '';
            categoryOrderInput.value = '';
            renderCategories();
        });
        
        // 서브 카테고리 폼 제출 이벤트
        document.getElementById('sub-category-form').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const parentId = parseInt(document.getElementById('parent-category').value);
            const subCategoryName = document.getElementById('sub-category-name').value.trim();
            let subCategoryOrder = parseInt(document.getElementById('sub-category-order').value);
            
            if (!parentId) {
                alert('국가를 선택해주세요.');
                return;
            }
            
            if (!subCategoryName) {
                alert('지역/도시 이름을 입력해주세요.');
                return;
            }
            
            const parentIndex = categories.findIndex(cat => cat.id === parentId);
            if (parentIndex === -1) {
                alert('선택한 국가가 존재하지 않습니다.');
                return;
            }
            
            // 해당 부모 카테고리의 서브카테고리 배열이 없으면 생성
            if (!categories[parentIndex].subCategories) {
                categories[parentIndex].subCategories = [];
            }
            
            // 순서가 없거나 잘못된 값이면 마지막으로 설정
            if (isNaN(subCategoryOrder) || subCategoryOrder < 1) {
                subCategoryOrder = categories[parentIndex].subCategories.length + 1;
            }
            
            if (editingSubCategoryId) {
                // 서브 카테고리 수정
                const subIndex = categories[parentIndex].subCategories.findIndex(sub => sub.id === editingSubCategoryId);
                if (subIndex !== -1) {
                    const oldOrder = categories[parentIndex].subCategories[subIndex].order;
                    
                    // 순서가 변경된 경우, 다른 서브카테고리의 순서도 조정
                    if (oldOrder !== subCategoryOrder) {
                        if (subCategoryOrder > oldOrder) {
                            // 내려갈 때: 사이에 있는 요소들은 위로 한 칸씩
                            categories[parentIndex].subCategories.forEach(sub => {
                                if (sub.id !== editingSubCategoryId && sub.order > oldOrder && sub.order <= subCategoryOrder) {
                                    sub.order--;
                                }
                            });
                        } else {
                            // 올라갈 때: 사이에 있는 요소들은 아래로 한 칸씩
                            categories[parentIndex].subCategories.forEach(sub => {
                                if (sub.id !== editingSubCategoryId && sub.order >= subCategoryOrder && sub.order < oldOrder) {
                                    sub.order++;
                                }
                            });
                        }
                    }
                    
                    categories[parentIndex].subCategories[subIndex].name = subCategoryName;
                    categories[parentIndex].subCategories[subIndex].order = subCategoryOrder;
                    alert('지역/도시가 수정되었습니다.');
                }
                editingSubCategoryId = null;
                
                // 취소 버튼 제거
                const cancelBtn = document.getElementById('cancel-sub-edit');
                if (cancelBtn) cancelBtn.remove();
                
                // 저장 버튼 텍스트 원래대로
                document.querySelector('#sub-category-form button[type="submit"]').textContent = '추가';
            } else {
                // 현재 order 이상의 서브 카테고리들 한 칸씩 아래로
                categories[parentIndex].subCategories.forEach(sub => {
                    if (sub.order >= subCategoryOrder) {
                        sub.order++;
                    }
                });
                
                // 서브 카테고리 추가
                // 모든 서브카테고리에서 가장 큰 ID 찾기
                let maxSubId = 100; // 서브카테고리는 100부터 시작
                categories.forEach(cat => {
                    if (cat.subCategories && cat.subCategories.length > 0) {
                        const localMaxId = Math.max(...cat.subCategories.map(sub => sub.id));
                        if (localMaxId > maxSubId) maxSubId = localMaxId;
                    }
                });
                
                const newSubId = maxSubId + 1;
                categories[parentIndex].subCategories.push({ 
                    id: newSubId, 
                    name: subCategoryName, 
                    order: subCategoryOrder,
                    parentId: parentId
                });
                alert('지역/도시가 추가되었습니다.');
            }
            
            document.getElementById('sub-category-name').value = '';
            document.getElementById('sub-category-order').value = '';
            renderSubCategories(parentId);
            renderCategories(); // 메인 카테고리의 서브카테고리 카운트 업데이트
        });
        
        // 메인 카테고리 수정 취소
        function cancelEdit() {
            editingCategoryId = null;
            categoryNameInput.value = '';
            categoryOrderInput.value = '';
            document.querySelector('#category-form button[type="submit"]').textContent = '저장';
            
            // 취소 버튼 제거
            const cancelBtn = document.getElementById('cancel-edit');
            if (cancelBtn) cancelBtn.remove();
        }
        
        // 서브 카테고리 수정 취소
        function cancelSubEdit() {
            editingSubCategoryId = null;
            document.getElementById('sub-category-name').value = '';
            document.getElementById('sub-category-order').value = '';
            document.querySelector('#sub-category-form button[type="submit"]').textContent = '추가';
            
            // 취소 버튼 제거
            const cancelBtn = document.getElementById('cancel-sub-edit');
            if (cancelBtn) cancelBtn.remove();
        }

        // 카테고리 타입 전환 버튼 이벤트
        document.getElementById('country-tab-btn').addEventListener('click', switchToMainCategoryMode);
        document.getElementById('city-tab-btn').addEventListener('click', switchToSubCategoryMode);
        
        // 카테고리 관리 타입 탭 전환 이벤트
        document.getElementById('menu-cat-btn').addEventListener('click', function() {
            document.getElementById('menu-cat-btn').classList.add('border-primary', 'text-primary-600');
            document.getElementById('menu-cat-btn').classList.remove('border-transparent', 'text-gray-500');
            document.getElementById('country-cat-btn').classList.add('border-transparent', 'text-gray-500');
            document.getElementById('country-cat-btn').classList.remove('border-primary', 'text-primary-600');
            
            document.getElementById('menu-category-section').classList.remove('hidden');
            document.getElementById('country-category-section').classList.add('hidden');
            
            // 메뉴 카테고리 다시 렌더링
            renderMenuCategories();
        });
        
        document.getElementById('country-cat-btn').addEventListener('click', function() {
            document.getElementById('country-cat-btn').classList.add('border-primary', 'text-primary-600');
            document.getElementById('country-cat-btn').classList.remove('border-transparent', 'text-gray-500');
            document.getElementById('menu-cat-btn').classList.add('border-transparent', 'text-gray-500');
            document.getElementById('menu-cat-btn').classList.remove('border-primary', 'text-primary-600');
            
            document.getElementById('country-category-section').classList.remove('hidden');
            document.getElementById('menu-category-section').classList.add('hidden');
            
            // 국가/지역 관리 다시 렌더링
            renderCategories();
        });

        // Navigation functionality
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                if (link.getAttribute('data-section')) {
                    e.preventDefault();
                    
                    // Update active navigation link
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    
                    // Update page title
                    document.getElementById('page-title').textContent = link.querySelector('span').textContent;
                    
                    // Show the correct section
                    const sectionId = link.getAttribute('data-section');
                    document.querySelectorAll('.admin-section').forEach(section => {
                        section.classList.remove('active');
                    });
                    document.getElementById(sectionId).classList.add('active');
                    
                    // 카테고리 관리 페이지로 이동할 때 메인 카테고리 모드로 초기화
                    if (sectionId === 'categories-section') {
                        switchToMainCategoryMode();
                    }
                }
            });
        });
        
        // Logout functionality
        document.getElementById('logout-btn').addEventListener('click', () => {
            if (confirm('로그아웃 하시겠습니까?')) {
                alert('로그아웃 되었습니다.');
                window.location.href = 'index.html';
            }
        });
        
        // Footer form submission
        document.getElementById('footer-form').addEventListener('submit', (e) => {
            e.preventDefault();
            alert('푸터 정보가 저장되었습니다.');
        });
        
        // 계좌 목록 렌더링
        function renderAccounts() {
            const accountList = document.getElementById('account-list');
            accountList.innerHTML = '';
            
            if (bankAccounts.length === 0) {
                accountList.innerHTML = '<tr><td colspan="5" class="text-center py-4 text-gray-500">등록된 계좌가 없습니다.</td></tr>';
                return;
            }
            
            bankAccounts.forEach(account => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900">${account.bankName}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${account.accountNumber}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${account.accountHolder}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${account.active ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                            ${account.active ? '사용 중' : '사용 안함'}
                        </span>
                    </td>
                    <td class="whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium">
                        <button data-id="${account.id}" class="edit-account-btn text-blue-600 hover:text-blue-900 mr-2">수정</button>
                        <button data-id="${account.id}" class="toggle-account-btn ${account.active ? 'text-orange-600 hover:text-orange-900' : 'text-green-600 hover:text-green-900'} mr-2">
                            ${account.active ? '비활성화' : '활성화'}
                        </button>
                        <button data-id="${account.id}" class="delete-account-btn text-red-600 hover:text-red-900">삭제</button>
                    </td>
                `;
                accountList.appendChild(row);
            });
            
            // 계좌 수정 버튼에 이벤트 연결
            document.querySelectorAll('.edit-account-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const account = bankAccounts.find(acc => acc.id === id);
                    
                    if (account) {
                        document.getElementById('bank-name').value = account.bankName;
                        document.getElementById('account-number').value = account.accountNumber;
                        document.getElementById('account-holder').value = account.accountHolder;
                        
                        // 폼 상태 변경
                        document.getElementById('account-form').dataset.mode = 'edit';
                        document.getElementById('account-form').dataset.id = id;
                        document.querySelector('#account-form button[type="submit"]').textContent = '계좌 수정';
                        
                        // 취소 버튼 추가
                        if (!document.getElementById('cancel-account-edit')) {
                            const cancelBtn = document.createElement('button');
                            cancelBtn.type = 'button';
                            cancelBtn.id = 'cancel-account-edit';
                            cancelBtn.className = 'px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 ml-2';
                            cancelBtn.textContent = '취소';
                            cancelBtn.onclick = cancelAccountEdit;
                            
                            document.querySelector('#account-form button[type="submit"]').insertAdjacentElement('afterend', cancelBtn);
                        }
                    }
                });
            });
            
            // 계좌 활성화/비활성화 버튼에 이벤트 연결
            document.querySelectorAll('.toggle-account-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const accountIndex = bankAccounts.findIndex(acc => acc.id === id);
                    
                    if (accountIndex !== -1) {
                        // 활성 상태 토글
                        bankAccounts[accountIndex].active = !bankAccounts[accountIndex].active;
                        
                        // 상태에 따른 메시지
                        const status = bankAccounts[accountIndex].active ? '활성화' : '비활성화';
                        alert(`계좌가 ${status} 되었습니다.`);
                        
                        // 목록 다시 렌더링
                        renderAccounts();
                    }
                });
            });
            
            // 계좌 삭제 버튼에 이벤트 연결
            document.querySelectorAll('.delete-account-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    
                    // 활성화된 계좌가 하나뿐이고 그것을 삭제하려는 경우 경고
                    const activeAccounts = bankAccounts.filter(acc => acc.active);
                    const isActive = bankAccounts.find(acc => acc.id === id)?.active;
                    
                    if (activeAccounts.length === 1 && isActive) {
                        alert('활성화된 계좌가 하나 이상 필요합니다. 다른 계좌를 활성화한 후 삭제해주세요.');
                        return;
                    }
                    
                    if (confirm('이 계좌를 삭제하시겠습니까?')) {
                        bankAccounts = bankAccounts.filter(acc => acc.id !== id);
                        renderAccounts();
                        alert('계좌가 삭제되었습니다.');
                    }
                });
            });
        }
        
        // 계좌 폼 제출 이벤트
        document.getElementById('account-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const bankName = document.getElementById('bank-name').value.trim();
            const accountNumber = document.getElementById('account-number').value.trim();
            const accountHolder = document.getElementById('account-holder').value.trim();
            
            if (!bankName || !accountNumber || !accountHolder) {
                alert('모든 필드를 입력해주세요.');
                return;
            }
            
            // 수정 모드인 경우
            if (this.dataset.mode === 'edit') {
                const id = parseInt(this.dataset.id);
                const accountIndex = bankAccounts.findIndex(acc => acc.id === id);
                
                if (accountIndex !== -1) {
                    bankAccounts[accountIndex].bankName = bankName;
                    bankAccounts[accountIndex].accountNumber = accountNumber;
                    bankAccounts[accountIndex].accountHolder = accountHolder;
                    
                    alert('계좌 정보가 수정되었습니다.');
                }
                
                // 폼 초기화
                resetAccountForm();
            }
            // 추가 모드인 경우
            else {
                const newId = bankAccounts.length > 0 ? Math.max(...bankAccounts.map(acc => acc.id)) + 1 : 1;
                
                // 첫 번째 계좌이거나 모든 계좌가 비활성화 상태일 때 자동 활성화
                const active = bankAccounts.length === 0 || !bankAccounts.some(acc => acc.active);
                
                bankAccounts.push({
                    id: newId,
                    bankName,
                    accountNumber,
                    accountHolder,
                    active
                });
                
                alert('계좌가 추가되었습니다.');
                
                // 폼 초기화
                this.reset();
            }
            
            // 계좌 목록 다시 렌더링
            renderAccounts();
        });
        
        // 계좌 수정 취소
        function cancelAccountEdit() {
            resetAccountForm();
        }
        
        // 계좌 폼 초기화
        function resetAccountForm() {
            const form = document.getElementById('account-form');
            form.reset();
            
            // 폼 상태 초기화
            delete form.dataset.mode;
            delete form.dataset.id;
            document.querySelector('#account-form button[type="submit"]').textContent = '계좌 추가';
            
            // 취소 버튼 제거
            const cancelBtn = document.getElementById('cancel-account-edit');
            if (cancelBtn) cancelBtn.remove();
        }
        
        // 회원 데이터 샘플
        let members = [
            {
                id: 1,
                name: '김철수',
                email: 'kim@example.com',
                phone: '010-1234-5678',
                joinDate: '2023-01-15',
                status: 'active'
            },
            {
                id: 2,
                name: '이영희',
                email: 'lee@example.com',
                phone: '010-2345-6789',
                joinDate: '2023-02-20',
                status: 'active'
            },
            {
                id: 3,
                name: '박지민',
                email: 'park@example.com',
                phone: '010-3456-7890',
                joinDate: '2023-03-10',
                status: 'inactive'
            },
            {
                id: 4,
                name: '최영수',
                email: 'choi@example.com',
                phone: '010-4567-8901',
                joinDate: '2023-04-05',
                status: 'active'
            },
            {
                id: 5,
                name: '정민지',
                email: 'jung@example.com',
                phone: '010-5678-9012',
                joinDate: '2023-05-22',
                status: 'inactive'
            }
        ];
        
        // 회원 페이지 설정
        const MEMBERS_PER_PAGE = 10;
        let currentPage = 1;
        let filteredMembers = [...members];
        
        // 회원 목록 렌더링
        function renderMembers() {
            const memberList = document.getElementById('member-list');
            const startIndex = (currentPage - 1) * MEMBERS_PER_PAGE;
            const endIndex = startIndex + MEMBERS_PER_PAGE;
            const membersToShow = filteredMembers.slice(startIndex, endIndex);
            
            memberList.innerHTML = '';
            
            if (membersToShow.length === 0) {
                memberList.innerHTML = '<tr><td colspan="6" class="text-center py-4 text-gray-500">등록된 회원이 없습니다.</td></tr>';
                return;
            }
            
            membersToShow.forEach(member => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900">${member.id}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${member.name}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${member.email}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${member.joinDate}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm">
                        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${member.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                            ${member.status === 'active' ? '활성' : '비활성'}
                        </span>
                    </td>
                    <td class="whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium">
                        <button data-id="${member.id}" class="edit-member-btn text-blue-600 hover:text-blue-900 mr-2">상세정보</button>
                        <button data-id="${member.id}" class="toggle-member-btn ${member.status === 'active' ? 'text-orange-600 hover:text-orange-900' : 'text-green-600 hover:text-green-900'} mr-2">
                            ${member.status === 'active' ? '비활성화' : '활성화'}
                        </button>
                        <button data-id="${member.id}" class="delete-member-btn text-red-600 hover:text-red-900">삭제</button>
                    </td>
                `;
                memberList.appendChild(row);
            });
            
            // 총 회원 수 업데이트
            document.querySelector('#member-count span').textContent = filteredMembers.length;
            
            // 회원 상세정보 버튼에 이벤트 연결
            document.querySelectorAll('.edit-member-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    openMemberDetailModal(id);
                });
            });
            
            // 회원 상태 토글 버튼에 이벤트 연결
            document.querySelectorAll('.toggle-member-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    toggleMemberStatus(id);
                });
            });
            
            // 회원 삭제 버튼에 이벤트 연결
            document.querySelectorAll('.delete-member-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    deleteMember(id);
                });
            });
            
            // 페이지네이션 렌더링
            renderPagination();
        }
        
        // 페이지네이션 렌더링
        function renderPagination() {
            const pagination = document.getElementById('member-pagination');
            const totalPages = Math.ceil(filteredMembers.length / MEMBERS_PER_PAGE);
            
            pagination.innerHTML = '';
            
            // 이전 페이지 버튼
            const prevButton = document.createElement('a');
            prevButton.href = '#';
            prevButton.classList.add('relative', 'inline-flex', 'items-center', 'px-2', 'py-2', 'rounded-l-md', 'border', 'border-gray-300', 'bg-white', 'text-sm', 'font-medium', 'text-gray-500', 'hover:bg-gray-50');
            prevButton.innerHTML = '<span class="sr-only">이전</span><i class="fas fa-chevron-left"></i>';
            prevButton.addEventListener('click', (e) => {
                e.preventDefault();
                if (currentPage > 1) {
                    currentPage--;
                    renderMembers();
                }
            });
            pagination.appendChild(prevButton);
            
            // 페이지 버튼들
            for (let i = 1; i <= totalPages; i++) {
                const pageButton = document.createElement('a');
                pageButton.href = '#';
                pageButton.classList.add('relative', 'inline-flex', 'items-center', 'px-4', 'py-2', 'border', 'text-sm', 'font-medium');
                
                if (i === currentPage) {
                    pageButton.classList.add('bg-blue-50', 'border-blue-500', 'text-blue-600', 'z-10');
                } else {
                    pageButton.classList.add('bg-white', 'border-gray-300', 'text-gray-500', 'hover:bg-gray-50');
                }
                
                pageButton.textContent = i;
                pageButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    currentPage = i;
                    renderMembers();
                });
                pagination.appendChild(pageButton);
            }
            
            // 다음 페이지 버튼
            const nextButton = document.createElement('a');
            nextButton.href = '#';
            nextButton.classList.add('relative', 'inline-flex', 'items-center', 'px-2', 'py-2', 'rounded-r-md', 'border', 'border-gray-300', 'bg-white', 'text-sm', 'font-medium', 'text-gray-500', 'hover:bg-gray-50');
            nextButton.innerHTML = '<span class="sr-only">다음</span><i class="fas fa-chevron-right"></i>';
            nextButton.addEventListener('click', (e) => {
                e.preventDefault();
                if (currentPage < totalPages) {
                    currentPage++;
                    renderMembers();
                }
            });
            pagination.appendChild(nextButton);
        }
        
        // 회원 검색 및 필터링
        function filterMembers() {
            const searchTerm = document.getElementById('member-search').value.toLowerCase();
            const statusFilter = document.getElementById('member-status-filter').value;
            
            filteredMembers = members.filter(member => {
                const matchesSearch = 
                    member.name.toLowerCase().includes(searchTerm) || 
                    member.email.toLowerCase().includes(searchTerm);
                
                const matchesStatus = 
                    statusFilter === 'all' || 
                    member.status === statusFilter;
                
                return matchesSearch && matchesStatus;
            });
            
            currentPage = 1;
            renderMembers();
        }
        
        // 회원 상태 토글
        function toggleMemberStatus(id) {
            const member = members.find(m => m.id === id);
            
            if (member) {
                const newStatus = member.status === 'active' ? 'inactive' : 'active';
                const statusText = newStatus === 'active' ? '활성화' : '비활성화';
                
                if (confirm(`회원 '${member.name}'의 상태를 ${statusText}로 변경하시겠습니까?`)) {
                    member.status = newStatus;
                    alert(`회원 상태가 변경되었습니다.`);
                    renderMembers();
                }
            }
        }
        
        // 회원 삭제
        function deleteMember(id) {
            const member = members.find(m => m.id === id);
            
            if (member && confirm(`회원 '${member.name}'을(를) 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다.`)) {
                members = members.filter(m => m.id !== id);
                filteredMembers = filteredMembers.filter(m => m.id !== id);
                alert('회원이 삭제되었습니다.');
                currentPage = 1;
                renderMembers();
            }
        }
        
        // 회원 상세정보 모달 열기
        function openMemberDetailModal(id) {
            const modal = document.getElementById('member-detail-modal');
            const titleElement = document.getElementById('member-modal-title');
            const form = document.getElementById('member-form');
            const saveBtn = document.getElementById('save-member-btn');
            
            // 새 회원 추가인지 기존 회원 수정인지 확인
            if (id) {
                const member = members.find(m => m.id === id);
                
                if (member) {
                    titleElement.textContent = '회원 상세정보';
                    document.getElementById('member-name').value = member.name;
                    document.getElementById('member-email').value = member.email;
                    document.getElementById('member-phone').value = member.phone;
                    document.getElementById('member-status').value = member.status;
                    
                    // ID 저장
                    form.dataset.id = id;
                }
            } else {
                titleElement.textContent = '새 회원 추가';
                form.reset();
                delete form.dataset.id;
            }
            
            // 모달 표시
            modal.classList.remove('hidden');
            
            // 저장 버튼 이벤트 처리
            saveBtn.onclick = function() {
                saveMember();
            };
        }
        
        // 모달 닫기
        function closeMemberModal() {
            document.getElementById('member-detail-modal').classList.add('hidden');
        }
        
        // 회원 저장
        function saveMember() {
            const form = document.getElementById('member-form');
            const id = form.dataset.id ? parseInt(form.dataset.id) : null;
            
            const name = document.getElementById('member-name').value;
            const email = document.getElementById('member-email').value;
            const phone = document.getElementById('member-phone').value;
            const status = document.getElementById('member-status').value;
            
            // 기본 유효성 검사
            if (!name || !email) {
                alert('이름과 이메일은 필수 입력 항목입니다.');
                return;
            }
            
            if (id) {
                // 기존 회원 수정
                const member = members.find(m => m.id === id);
                
                if (member) {
                    member.name = name;
                    member.email = email;
                    member.phone = phone;
                    member.status = status;
                    
                    alert('회원 정보가 업데이트되었습니다.');
                }
            } else {
                // 새 회원 추가
                const newId = members.length > 0 ? Math.max(...members.map(m => m.id)) + 1 : 1;
                const today = new Date();
                const joinDate = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;
                
                members.push({
                    id: newId,
                    name,
                    email,
                    phone,
                    joinDate,
                    status
                });
                
                alert('새 회원이 추가되었습니다.');
            }
            
            // 모달 닫고 회원 목록 업데이트
            closeMemberModal();
            filterMembers();
        }
        
        // 이벤트 리스너 등록
        document.addEventListener('DOMContentLoaded', function() {
            // 회원 검색 입력 이벤트
            document.getElementById('member-search').addEventListener('input', filterMembers);
            
            // 회원 상태 필터 변경 이벤트
            document.getElementById('member-status-filter').addEventListener('change', filterMembers);
            
            // 회원 추가 버튼 클릭 이벤트
            document.getElementById('add-member-btn').addEventListener('click', function() {
                openMemberDetailModal(null);
            });
            
            // 모달 닫기 버튼 클릭 이벤트
            document.getElementById('close-member-modal-btn').addEventListener('click', closeMemberModal);
            
            // 모달 배경 클릭으로 닫기
            document.getElementById('member-modal-backdrop').addEventListener('click', closeMemberModal);
        });

        // 메뉴 카테고리 관리 기능
        let menuCategories = [
            { id: 1, name: '베스트', url: 'best.html', order: 1, subMenus: [] },
            { id: 2, name: '해외여행', url: 'packages.html', order: 2, subMenus: [
                { id: 101, name: '유럽', url: 'packages.html?region=europe', order: 1, parentId: 2 },
                { id: 102, name: '동남아시아', url: 'packages.html?region=southeast-asia', order: 2, parentId: 2 }
            ] },
            { id: 3, name: '호텔', url: 'hotels.html', order: 3, subMenus: [] },
            { id: 4, name: '투어/입장권', url: 'tours-tickets.html', order: 4, subMenus: [] },
            { id: 5, name: '국내숙소', url: 'domestic.html', order: 5, subMenus: [] },
            { id: 6, name: '골프', url: 'golf.html', order: 6, subMenus: [] },
            { id: 7, name: '테마여행', url: 'theme.html', order: 7, subMenus: [] },
            { id: 8, name: '맞춤여행', url: 'custom.html', order: 8, subMenus: [] },
            { id: 9, name: '이달의 혜택', url: 'benefits.html', order: 9, subMenus: [] }
        ];

        let editingMenuCategoryId = null;
        let editingSubMenuId = null;
        let currentMenuCategoryId = null;

        // 메뉴 카테고리 렌더링
        function renderMenuCategories() {
            const menuCategoryList = document.getElementById('menu-category-list');
            menuCategoryList.innerHTML = '';
            
            if (menuCategories.length === 0) {
                menuCategoryList.innerHTML = '<tr><td colspan="4" class="text-center py-4 text-gray-500">등록된 메뉴 카테고리가 없습니다.</td></tr>';
                return;
            }
            
            // 순서에 따라 정렬
            const sortedMenuCategories = [...menuCategories].sort((a, b) => a.order - b.order);
            
            sortedMenuCategories.forEach(category => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900">${category.order}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${category.name}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${category.url}</td>
                    <td class="whitespace-nowrap px-3 py-4 text-sm text-gray-500">${category.subMenus ? category.subMenus.length : 0}개</td>
                    <td class="whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium">
                        <button data-id="${category.id}" class="edit-menu-category-btn text-blue-600 hover:text-blue-900 mr-2">수정</button>
                        <button data-id="${category.id}" class="move-up-menu-btn text-gray-600 hover:text-gray-900 mr-2" ${category.order === 1 ? 'disabled' : ''}>
                            <i class="fas fa-arrow-up"></i>
                        </button>
                        <button data-id="${category.id}" class="move-down-menu-btn text-gray-600 hover:text-gray-900 mr-2" ${category.order === menuCategories.length ? 'disabled' : ''}>
                            <i class="fas fa-arrow-down"></i>
                        </button>
                        <button data-id="${category.id}" class="view-submenu-btn text-green-600 hover:text-green-900 mr-2">서브메뉴</button>
                        <button data-id="${category.id}" class="delete-menu-category-btn text-red-600 hover:text-red-900">삭제</button>
                    </td>
                `;
                menuCategoryList.appendChild(row);
            });
            
            // 메뉴 카테고리 수정 버튼에 이벤트 연결
            document.querySelectorAll('.edit-menu-category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const category = menuCategories.find(cat => cat.id === id);
                    
                    if (category) {
                        editingMenuCategoryId = id;
                        document.getElementById('menu-category-name').value = category.name;
                        document.getElementById('menu-category-url').value = category.url;
                        document.getElementById('menu-category-order').value = category.order;
                        document.querySelector('#menu-category-form button[type="submit"]').textContent = '수정';
                        
                        // 취소 버튼 추가 (있다면)
                        if (!document.getElementById('cancel-menu-edit')) {
                            const cancelBtn = document.createElement('button');
                            cancelBtn.type = 'button';
                            cancelBtn.id = 'cancel-menu-edit';
                            cancelBtn.className = 'px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 ml-2';
                            cancelBtn.textContent = '취소';
                            cancelBtn.onclick = cancelMenuEdit;
                            document.querySelector('#menu-category-form button[type="submit"]').after(cancelBtn);
                        }
                    }
                });
            });
            
            // 메뉴 카테고리 삭제 버튼에 이벤트 연결
            document.querySelectorAll('.delete-menu-category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const category = menuCategories.find(cat => cat.id === id);
                    
                    if (category && confirm(`'${category.name}' 메뉴를 삭제하시겠습니까?`)) {
                        menuCategories = menuCategories.filter(cat => cat.id !== id);
                        
                        // 삭제 후 순서 재조정
                        menuCategories = menuCategories.map((cat, index) => ({
                            ...cat,
                            order: index + 1
                        }));
                        
                        renderMenuCategories();
                        alert('메뉴가 삭제되었습니다.');
                    }
                });
            });
            
            // 메뉴 순서 위로 버튼에 이벤트 연결
            document.querySelectorAll('.move-up-menu-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const category = menuCategories.find(cat => cat.id === id);
                    
                    if (category && category.order > 1) {
                        const prevCategory = menuCategories.find(cat => cat.order === category.order - 1);
                        if (prevCategory) {
                            prevCategory.order++;
                            category.order--;
                            renderMenuCategories();
                        }
                    }
                });
            });
            
            // 메뉴 순서 아래로 버튼에 이벤트 연결
            document.querySelectorAll('.move-down-menu-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const id = parseInt(this.getAttribute('data-id'));
                    const category = menuCategories.find(cat => cat.id === id);
                    
                    if (category && category.order < menuCategories.length) {
                        const nextCategory = menuCategories.find(cat => cat.order === category.order + 1);
                        if (nextCategory) {
                            nextCategory.order--;
                            category.order++;
                            renderMenuCategories();
                        }
                    }
                });
            });
        }
        
        // 메뉴 카테고리 폼 제출 이벤트
        document.getElementById('menu-category-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('menu-category-name').value.trim();
            const url = document.getElementById('menu-category-url').value.trim();
            let order = parseInt(document.getElementById('menu-category-order').value);
            
            if (!name || !url) {
                alert('카테고리 이름과 URL은 필수 입력 항목입니다.');
                return;
            }
            
            if (isNaN(order) || order < 1) {
                order = menuCategories.length + 1;
            }
            
            if (editingMenuCategoryId) {
                // 메뉴 카테고리 수정
                const category = menuCategories.find(cat => cat.id === editingMenuCategoryId);
                
                if (category) {
                    const oldOrder = category.order;
                    
                    // 순서가 변경된 경우, 다른 카테고리의 순서도 조정
                    if (oldOrder !== order) {
                        if (order > oldOrder) {
                            // 내려갈 때: 사이에 있는 요소들은 위로 한 칸씩
                            menuCategories.forEach(cat => {
                                if (cat.id !== category.id && cat.order > oldOrder && cat.order <= order) {
                                    cat.order--;
                                }
                            });
                        } else {
                            // 올라갈 때: 사이에 있는 요소들은 아래로 한 칸씩
                            menuCategories.forEach(cat => {
                                if (cat.id !== category.id && cat.order >= order && cat.order < oldOrder) {
                                    cat.order++;
                                }
                            });
                        }
                    }
                    
                    category.name = name;
                    category.url = url;
                    category.order = order;
                    
                    alert('카테고리가 업데이트되었습니다.');
                    cancelMenuEdit();
                }
            } else {
                // 현재 order 이상의 카테고리들 한 칸씩 아래로
                menuCategories.forEach(cat => {
                    if (cat.order >= order) {
                        cat.order++;
                    }
                });
                
                // 새 메뉴 카테고리 추가
                const newId = menuCategories.length > 0 ? Math.max(...menuCategories.map(cat => cat.id)) + 1 : 1;
                menuCategories.push({
                    id: newId,
                    name,
                    url,
                    order
                });
                
                alert('새 메뉴 카테고리가 추가되었습니다.');
                this.reset();
                
                // 폼 초기화
                document.getElementById('menu-category-order').value = menuCategories.length;
            }
            
            renderMenuCategories();
        });
        
        // 메뉴 카테고리 수정 취소
        function cancelMenuEdit() {
            const form = document.getElementById('menu-category-form');
            form.reset();
            
            // 다음 메뉴 순서로 설정
            document.getElementById('menu-category-order').value = menuCategories.length + 1;
            
            // 수정 모드 해제
            editingMenuCategoryId = null;
            document.querySelector('#menu-category-form button[type="submit"]').textContent = '저장';
            
            // 취소 버튼 제거
            const cancelBtn = document.getElementById('cancel-menu-edit');
            if (cancelBtn) cancelBtn.remove();
        }
        
        // 탭 전환 이벤트 리스너 등록
        document.getElementById('menu-cat-btn').addEventListener('click', function() {
            this.classList.add('border-primary', 'text-primary-600');
            this.classList.remove('border-transparent', 'text-gray-500');
            
            const countryBtn = document.getElementById('country-cat-btn');
            countryBtn.classList.remove('border-primary', 'text-primary-600');
            countryBtn.classList.add('border-transparent', 'text-gray-500');
            
            document.getElementById('menu-category-section').classList.remove('hidden');
            document.getElementById('country-category-section').classList.add('hidden');
        });
        
        document.getElementById('country-cat-btn').addEventListener('click', function() {
            this.classList.add('border-primary', 'text-primary-600');
            this.classList.remove('border-transparent', 'text-gray-500');
            
            const menuBtn = document.getElementById('menu-cat-btn');
            menuBtn.classList.remove('border-primary', 'text-primary-600');
            menuBtn.classList.add('border-transparent', 'text-gray-500');
            
            document.getElementById('country-category-section').classList.remove('hidden');
            document.getElementById('menu-category-section').classList.add('hidden');
        });

        // 페이지 로드 시 카테고리 목록, 계좌 목록, 회원 목록 렌더링
        window.addEventListener('DOMContentLoaded', () => {
            renderCategories();
            updateParentCategoryDropdown();
            renderAccounts();
            renderMembers();
            renderMenuCategories();
            
            // 초기 메뉴 순서 설정
            document.getElementById('menu-category-order').value = menuCategories.length + 1;
        });
    </script>
</body>
</html>
